(()=>{"use strict";var e={782:(e,r,t)=>{t.d(r,{L:()=>o});const o=(e,r=200)=>({headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},statusCode:r,body:JSON.stringify(e)})},444:(e,r,t)=>{t.d(r,{z:()=>i});var o=t(806),s=t.n(o),n=t(657),a=t.n(n);const i=e=>s()(e).use(a()())},806:e=>{e.exports=require("@middy/core")},657:e=>{e.exports=require("@middy/http-json-body-parser")},723:e=>{e.exports=require("pg")},43:e=>{e.exports=require("source-map-support/register")}},r={};function t(o){var s=r[o];if(void 0!==s)return s.exports;var n=r[o]={exports:{}};return e[o](n,n.exports,t),n.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{t.r(o),t.d(o,{getCatById:()=>u,main:()=>l}),t(43);var e=t(782),r=t(444),s=t(723);const{PG_HOST:n,PG_PORT:a,PG_DATABASE:i,PG_USERNAME:d,PG_PASSWORD:c}=process.env,p={host:n,port:a,database:i,user:d,password:c,ssl:{rejectUnauthorized:!1},connectionTimeoutMillis:5e3},u=async r=>{const t=new s.Client(p);await t.connect(),console.log("Get toy by id: ",r);try{const o=r.pathParameters.id,{rows:s}=await t.query(`select p.title, p.description, p.price, s.count from products as p inner join stocks s on p.id = s.product_id\n             where p.id = '${o}'`);return 0!==s.length?(0,e.L)({cats:s},200):(0,e.L)({message:"Toy was not found"},404)}catch(r){return(0,e.L)({message:r.message},404)}finally{t.end()}},l=(0,r.z)(u)})();var s=exports;for(var n in o)s[n]=o[n];o.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();
//# sourceMappingURL=handler.js.map